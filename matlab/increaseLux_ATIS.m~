% Esta función proporciona el conjunto de datos necesarios para 
% simular una cámara ATIS.

tic;

clear all;clc;close all;

curr_path = pwd;

N = 8; 
M = 8;
freq = 200;
frames = 8;
rpm = freq*60;


% PATH_input = '/home/netware/users/jpgironruiz/Desktop/Documents/Cadence_analysis/Inputs/';
% %PATH_input = '/sdcard/documents/MSc/Cadence_analysis/Inputs/';
% cd(PATH_input);
% nameSignal = strcat('illuminationAtis',int2str(N),'X',int2str(M),'_',int2str(freq));
% name_folder = strcat(nameSignal,'/');
% [s,mess1,mess2]=mkdir(name_folder);
% if (~strcmp(mess1,''))
%    
%     rmdir(name_folder,'s');
%     mkdir(name_folder);
% end
% PATH_input = strcat(PATH_input,nameSignal,'/');

T = 1/freq;
vec_time = 0:T/(frames):T;
len_t=length(vec_time);
samples = 2;
Matrix_Ipd = zeros(M*N,len_t);
Matrix_tmp = zeros(M,N);
Color_max = 255;
Color_min = 0;
deltaColor = (Color_max - Color_min)/(N/2*frames);
Color = deltaColor;


for fr=0:frames

    Rini = M/2;Rend = Rini + 1;
    Cini = N/2;Cend = Cini + 1;
    
    if ( fr ~= 0 )
    
        for ind=1:N/2
           Matrix_tmp(Rini,[Cini:Cend]) = Color;       
           Matrix_tmp([Rini:Rend],Cend) = Color;
           Matrix_tmp(Rend,[Cini:Cend]) = Color;
           Matrix_tmp([Rini:Rend],Cini) = Color;
           Rini = Rini - 1 ; Rend = Rend + 1;
           Cini = Cini - 1 ; Cend = Cend + 1;
           Color = Color + deltaColor;
        end
    else
        
        Matrix_tmp(:,:) = 0;
        
    end
    
    h = imagesc(uint8(Matrix_tmp));
    grid on;
    xlabel('Columns')
    ylabel('Rows')
    title(strcat('Time = ',
    
    % Colocando los valores de la matriz dentro del vector unidimensional
    % de pixeles
    
    for ind_x=1:M
        
        for ind_y=1:N
            
            Matrix_Ipd(ind_y + (ind_x-1)*M,fr+1) = Matrix_tmp(ind_x,ind_y);
            fprintf('ind_y+m %d | fr+1 %d \n',ind_y+(ind_x-1)*M,fr+1);
            
        end
    end
    
    
end







%fid = fopen('README.txt','wt');
%fprintf(fid,' N %d\n M %d\n T %d \n freq %d (Hz) \n Period_total %d',N,M,T,freq,T+200e-6);
%fclose(fid);

cd(curr_path);